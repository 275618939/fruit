/***************************************************
		支付宝支付
***************************************************/
function alipay(){			 	this.card=new CardCookie();			 
	this.partner='2088611108018444';	this.privateKey='9wilzcpgxollwrzj9gdq21lpj7634m1r';	this.service='create_partner_trade_by_buyer';	this._input_charset='utf-8';	this.sign_type='MD5';	this.sign='';           //签名	this.out_trade_no='';   //订单号	this.subject='fruit';	this.payment_type=1;	this.logistics_type='EXPRESS';	this.logistics_fee=0.00;	this.logistics_payment='SELLER_PAY';	this.price=0;//商品单价	this.quantity=1; 	this.return_url='http://www.51yingwu.com/order_complete.html';	//收货人姓名	this.receive_name='nosay';	//收货人信息	this.receive_address='nosay';	//收货人手机	this.receive_mobile='13666666666';	this.seller_email='zhangwenpu@51yingwu.com';		//参数列表	this.params=['return_url','receive_name','receive_address','receive_mobile','partner','privateKey','service','_input_charset','out_trade_no','subject','payment_type','logistics_type','logistics_fee','logistics_payment','price','quantity','seller_email'];		//设置订单号和价格	this.setPrizeAndOrder=function(price,out_trade_no){	    this.price=price;		this.out_trade_no=out_trade_no;	};	//创建请求参数	this.createQequest=function(){		var param=this.createLinkString();		//this.buildRequestMysign(param);		this.sign=this.getMysign(param);		param = param + '&sign' + "=" + this.sign+ "&";		param = param + 'sign_type' + "=" + this.sign_type;		return param;	};	//创建请求参数创建隐藏域采取FORM提交	this.createHideInput=function(param){		var strs = param.split("&");		var len = strs.length;		var pStr="";		for(var i=0;i<len;i++){		    var tempMap=strs[i].split("=");		    var key=tempMap[0];			var value=tempMap[1];				pStr=pStr+"<input type='hidden' name='"+key+"' value='"+value+"' />";		}		return pStr;	};	//获得签名	this.getMysign=function(param){		var userInfo=this.card.getCookie("userInfo");			var	sign='';			if(typeof(userInfo) != "undefined"  && userInfo != null && userInfo != ""){			userInfo=JSON.parse(userInfo);			var sid=userInfo.sid;			$.ajax({					async: false,					type: "post",					url:"http://"+window.location.host+"/capi/alipay/sign/"+sid,			        data:param,					error: function(request) {						alert("服务器忙请稍后!");					},					success: function(data) {						if(data.state==1){							sign=data.value;							return sign;						}					}			});		}		return sign;	};	//创建MD5签名	this.buildRequestMysign=function(param){		param+=this.privateKey;		this.sign=$.md5(param); 	};	//生成请求参数,并对参数进行排序	this.createLinkString=function(){			this.params.sort();			var len=this.params.length;		var param='';		for(var i=0;i<len;i++){		    var key=this.params[i];			var value=eval("(this."+key+")");				if (i == len - 1) {                param = param + key + "=" + value;            } else {                param = param + key + "=" + value + "&";            }		}	    return param;	}	
	
}